<!DOCTYPE html>
<html>
<head>
    <title>Test Geoapify</title>
</head>
<body>
    <h1>Test Geoapify API</h1>
    <input type="text" id="direccion" placeholder="Ingrese una dirección" value="Zapiola 2055">
    <button onclick="testGeoapify()">Test Geoapify Autocomplete</button>
    <button onclick="testGeoapifySearch()">Test Geoapify Search</button>
    <div id="result"></div>

    <script>
        const API_KEY = '1186162aedfa4b10adf6713a6dcf05e1';
        
        async function testGeoapify() {
            const direccion = document.getElementById('direccion').value;
            const resultDiv = document.getElementById('result');
            
            resultDiv.innerHTML = 'Buscando autocompletado...';
            
            try {
                // Usar Geoapify API para autocompletado
                const geoapifyUrl = `https://api.geoapify.com/v1/geocode/autocomplete?text=${encodeURIComponent(direccion)}&apiKey=${API_KEY}&limit=5&filter=countrycode:ar`;
                
                // Usar proxy CORS
                const proxyUrl = `https://api.codetabs.com/v1/proxy?quest=${encodeURIComponent(geoapifyUrl)}`;
                
                const response = await fetch(proxyUrl);
                
                if (response.ok) {
                    const data = await response.json();
                    resultDiv.innerHTML = `<h2>Autocompletado:</h2><pre>${JSON.stringify(data, null, 2)}</pre>`;
                } else {
                    resultDiv.innerHTML = `Error: ${response.status} ${response.statusText}`;
                }
            } catch (error) {
                resultDiv.innerHTML = `Error: ${error.message}`;
            }
        }
        
        async function testGeoapifySearch() {
            const direccion = document.getElementById('direccion').value;
            const resultDiv = document.getElementById('result');
            
            resultDiv.innerHTML = 'Buscando dirección...';
            
            try {
                // Usar Geoapify API para búsqueda
                const geoapifyUrl = `https://api.geoapify.com/v1/geocode/search?text=${encodeURIComponent(direccion)}&apiKey=${API_KEY}&limit=1&filter=countrycode:ar`;
                
                // Usar proxy CORS
                const proxyUrl = `https://api.codetabs.com/v1/proxy?quest=${encodeURIComponent(geoapifyUrl)}`;
                
                const response = await fetch(proxyUrl);
                
                if (response.ok) {
                    const data = await response.json();
                    resultDiv.innerHTML = `<h2>Búsqueda:</h2><pre>${JSON.stringify(data, null, 2)}</pre>`;
                } else {
                    resultDiv.innerHTML = `Error: ${response.status} ${response.statusText}`;
                }
            } catch (error) {
                resultDiv.innerHTML = `Error: ${error.message}`;
            }
        }
    </script>
</body>
</html>